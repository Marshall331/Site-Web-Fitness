<div *ngIf="etatChargement === 'en cours'" class="d-flex justify-content-center align-items-center vh-100">
  <h3 id="txt-loading">Chargement . . . </h3>
  <div class="progress w-50 custom-height">
    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75"
      aria-valuemin="0" aria-valuemax="100" style="width: 75%; transition: width 0.1s linear;"></div>
  </div>
</div>


<div *ngIf="etatChargement == 'erreur'" class="alert alert-dismissible alert-danger">
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  <h4>Service non disponible.</h4>
  <p>Veuillez réessayer dans quelques instants.</p>
</div>

<div *ngIf="etatChargement == 'fait'">
  <!-- <div class="alert alert-dismissible alert-success">
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    Chargement réussi.
  </div> -->
  <a routerLink="/tache/new" class="btn btn-outline-primary">Nouvelle tâche</a>
  <hr>
  <h2>
    <b>{{ tachesBySearch.length }}</b> Tâches enregistrées
  </h2>
  <div class="largeur">
    <div id="container" class="d-inline-flex">
      <label id="lab-etat" for="choix-etat" class="form-label mt-4">Etat :</label>
      <select [(ngModel)]="etatChoisi" (ngModelChange)="updateEtat($event)" class="form-select" id="choix-etat">
        <option value="tout" selected>tout</option>
        <option *ngFor="let etat of etatTache | keyvalue" [value]="etat.value">
          {{ etat.value }}
        </option>
      </select>
      <input [(ngModel)]="recherche" (ngModelChange)="updateRecherche($event)" id="search-bar"
        class="form-control me-sm-2" type="search" placeholder="Rechercher une tâche">
      <label id="lab-etat" for="choix-etat" class="form-label mt-4">Sélection :</label>
      <select ngModel (ngModelChange)="updateEtatSelection($event)" [disabled]="this.selectedTaskIds.length < 1"
        class="form-select" id="choix-etat">
        <option disabled hidden selected value=""></option>
        <option *ngFor="let etat of etatTache | keyvalue">
          {{ etat.value }}
        </option>
      </select>
      <div class="right-margin" *ngIf="this.selectedTaskIds.length > 0">
        <button class="btn btn-outline-dark" (click)="onSupprime()" >
          <i class="fa-solid fa-trash"></i>
        </button>
      </div>
      <div id="checkbox" class="checkbox" bis_skin_checked="1">
        <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" [(ngModel)]="selectAllChecked"
          (ngModelChange)="toggleSelectAll()">
      </div>
    </div>
    <ul class="list-group">
      <app-tache-item *ngFor="let task of tachesBySearch || []" [tache]="task" [isSelected]="isTaskSelected(task.id)"
        (checkboxChange)="onTaskCheckboxChange($event, task.id)">
      </app-tache-item>
    </ul>
  </div>